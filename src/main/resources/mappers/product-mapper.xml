<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="product">

	<insert id="addProduct">insert into product values(product_seq.nextval,#{pname},${price},#{category},default,#{content},#{img},default,default)</insert>

<insert id="addImg">insert into product_img values(${img_seq},#{oriName},#{sysName})</insert>
	
	<select id="getSequence" resultType="int">select max(pseq) from product</select>

<select id="getProduct" resultType="osf.spring.dto.ProductDTO">select * from product</select>

 <select id="productDetail" resultType="osf.spring.dto.ProductDTO">select * from product where pseq=#{value}</select>

<insert id="addOption">insert into product_option values(${parent_seq},#{color},#{psize},${item_count})</insert>

<delete id="productDelete">delete from product where pseq=${value}</delete>

<select id="getImg" resultType="String">select sysname from product_img where product_seq=${value}</select>
 
 <delete id="deleteImg">delete from product_img where product_seq=${value}</delete>
 
 <delete id="deleteOption">delete from product_option where parent_seq=${value}</delete>
 
 <update id="productModify">update product set pname=#{pname}, price=${price}, content=#{content}, category=#{category}, title_img=#{img} where pseq=${pseq} </update>
 
 <select id="getOption" resultType="osf.spring.dto.OptionDTO">select * from product_option where parent_seq=${value}</select>
 
</mapper>